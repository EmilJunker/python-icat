		  History of changes to python-icat
		  =================================

* Version 0.5.1 (2014-07-??)

 + Add a module icat.eval that is intended to be run using the "-m"
   command line switch to Python.  It allows to evaluate Python
   expressions within an ICAT session as one liners directly from the
   command line, as for example:

     # get all Dataset ids
     $ python -m icat.eval -e 'client.search("Dataset.id")' -s root
     [102284L, 102288L, 102289L, 102293L]

 + Fix an issue in the error handling in the IDS client that caused in
   the case of an error from the IDS server an urllib2.HTTPError to be
   raised instead of an IDSServerError and thus the loss of all
   details about the error reported in the reply from the server.

 + Add specific exception classes for the different error codes raised
   by the IDS server.

 + Fix compatibility issue with Python 3.3 that caused the HTTP method
   to be set to "None" in some IDS methods, which in turn caused an
   internal server error to be raised in the response from IDS.

 + Fix compatibility issues with Python 3.4: some methods have been
   removed from class urllib.request.Request which caused an
   AttributeError in the IDSClient.

 + Fix: failed to connect to an ICAT server if it advertises a version
   number having a trailing "-SNAPSHOT" in getApiVersion().  For
   compatibility, a trailing "-SNAPSHOT" will be replaced by "a1" in
   the client.apiversion attribute.

 + Make example files compatible across Python versions without
   modifications, such as running 2to3 on them.

* Version 0.5.0 (2014-06-24)

 + Integrate an IDS client in the ICAT client.

 + Improved icatdump.py and icatrestore.py:

   - Changed the logical structure of the dump file format which
     significantly simplified the scripts.  Note that old dump files
     are not compatible with the new versions.

   - Add support for XML dump files.  A XML Schema Definition for the
     dump file format is provided in the doc directory.

   The scripts are now considered to be legitimate tools (though still
   alpha) rather then mere examples.  Consequently, they will be
   installed into the bin directory.

 + Implicitly set a one to many relation to an empty list if it is
   accessed but not present in an Entity object rather then raising an
   AttributeError.  See ICAT Issue 130.

 + Allow setting one to many relationship attributes and deletion of
   attributes in Entity.  Add method truncateRelations() to Entity.
   Truncate dummy relations set by the factory in newly created entity
   objects.

 + Cache the result from getEntityInfo() in the client.

 + Add a method Entity.__sortkey__() that return a key that when used
   as a sorting key in list.sort() allows any list of entity objects
   to have a well defined order.  Sorting is based on the Constraint
   attributes.  Add a class variable SortAttrs that overrides this and
   will be set as a fall back for those entity classes that do not
   have a suitable Constraint.

* Version 0.4.0 (2014-02-11)

 + Add support for the jurko fork of Suds [1] and for Python 3.

 + Add a new method Client.searchUniqueKey().

 + Add an optional argument keyindex to method Entity.getUniqueKey()
   that is used as a cache of previously generated keys.  Remove the
   argument addbean.  addbean had been documented as for internal use
   only, so this is not considered an incompatible change.

 + Add a new exception class DataConsistencyError.  Raise
   DataConsistencyError in Entity.getUniqueKey() if a relation that is
   required in a constraint is not set.

 + Rename SearchResultError to SearchAssertionError.
   SearchResultError was a misnomer here, as this exception class is
   very specific to Client.assertedSearch().  Add a new generic
   exception class SearchResultError and derive SearchAssertionError
   from it.  This way, the change should not create any compatibility
   problems in client programs.

 + Add a check in icatcheck that the ICATErrors as defined in
   icat.exceptions are in sync with icatExceptionType as defined in
   the schema.

 + Bugfix: The code dealing with exceptions raised by the ICAT server
   did require all attributes in IcatException sent by the server to
   be set, although some of these attributes are marked as optional in
   the schema.

 + Do not delete the Suds cache directory in Client.cleanup().  

 + Installation: python-icat requires Python 2.6 or newer.  Raise an
   error if setup.py is run by a too old Python version.

 + Move some internal routines in a separate module icat.helper.

 + Greatly improved example scripts icatdump.py and icatrestore.py.

* Version 0.3.0 (2014-01-10)

 + Add support for ICAT 4.3.1.  (Compatibility with ICAT 4.3.2 has
   also been tested but did not require any changes.)

 + Implement alias names for entity attributes.  This facilitates
   compatibility of client programs to different ICAT versions.
   E.g. a client program may use rule.grouping regardless of the ICAT
   version, for ICAT 4.2.* this is aliased to rule.group.

 + Add a client method assertedSearch().

 + Add a method getUniqueKey() for all entities.

 + Add entity methods Group.getUsers() and
   Instrument.getInstrumentScientists().

 + WARNING, incompatible change!
   Changed entity methods Instrument.addInstrumentScientist() and
   Investigation.addInvestigationUser() to not to create the
   respective user any more, but rather expect a list of existing
   users as argument.  Renamed Group.addUser(),
   Instrument.addInstrumentScientist(), and
   Investigation.addInvestigationUser() to addUsers(),
   addInstrumentScientists(), and addInvestigationUsers() (note the
   plural "s") respectively.

   In the client code, replace:

   pi = investigation.addInvestigationUser(uid, fullName=userName, 
                                           search=True, 
                                           role="Principal Investigator")

   by

   pi = client.createUser(uid, fullName=userName, search=True)
   investigation.addInvestigationUsers([pi], role="Principal Investigator")

 + Work around a bug in the way SUDS deals with datetime values: set
   the local time zone to UTC.

 + Add example scripts icatdump.py and icatrestore.py.

* Version 0.2.0 (2013-11-18)

 + Rework internals of icat.config.

 + Bugfix: Config required a password to be set even if prompt for
   password was requested.

 + Add support for configuration via environment variables.

 + Add support of HTTP proxy settings.  [Suggested by Alistair Mills]

 + WARNING, incompatible change!
   The configuration read by icat.config is not stored as attributes
   on the Config object itself, but rather getconf() returns an object
   with these attributes set.  This keeps the configuration values
   cleanly separated from the attributes of the Config object.

   In the client code, replace:

   conf = icat.config.Config()
   conf.getconfig()

   by

   config = icat.config.Config()
   conf = config.getconfig()

 + Move ConfigError from icat.config to icat.exception.

 + Move GenealogyError from icat.icatcheck to icat.exception.

 + Review export of symbols.  Most client programs should only need to
   import icat and icat.config.

* Version 0.1.0 (2013-11-01)

 + Initial version

* References

[1] https://bitbucket.org/jurko/suds/


# Local Variables:
# mode: org
# End:
